(this.webpackJsonpflabingo=this.webpackJsonpflabingo||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/camera.2723d63e.svg"},,function(e){e.exports=JSON.parse('{"application":{"name":"Flabingo (\u4eee)"},"bingo":{"sheet":{"width":4,"height":4},"slot":{"variations":[{"value":"istj","label":"IS\\nTJ","description":"The Inspector"},{"value":"infj","label":"IN\\nFJ","description":"The Counselor"},{"value":"intj","label":"IN\\nTJ","description":"The Mastermind"},{"value":"enfj","label":"EN\\nFJ","description":"The Giver"},{"value":"istp","label":"IS\\nTP","description":"The Craftsman"},{"value":"esfj","label":"ES\\nFJ","description":"The Provider"},{"value":"infp","label":"IN\\nFP","description":"The Idealist"},{"value":"esfp","label":"ES\\nFP","description":"The Performer"},{"value":"enfp","label":"EN\\nFP","description":"The Champion"},{"value":"estp","label":"ES\\nTP","description":"The Doer"},{"value":"estj","label":"ES\\nTJ","description":"The Supervisor"},{"value":"entj","label":"EN\\nTJ","description":"The Commander"},{"value":"intp","label":"IN\\nTP","description":"The Thinker"},{"value":"isfj","label":"IS\\nFJ","description":"The Nurturer"},{"value":"entp","label":"EN\\nTP","description":"The Visionary"},{"value":"isfp","label":"IS\\nFP","description":"The Composer"}]}}}')},,,function(e,t,n){e.exports=n(23)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(5),l=n.n(i),o=(n(18),n(2)),c=(n(19),n(6)),s=n.n(c),u=(n(20),function(e){var t=e.slot;return r.a.createElement("div",{className:s()("sheet-cell",{punched:t.punched})},t.label.split("\n").map((function(e,t){return r.a.createElement("div",{key:t},e)})))}),h=function(e){var t=e.row;return r.a.createElement("div",{className:"sheet-row"},t.map((function(e,t){return r.a.createElement(u,{key:t,slot:e})})))},v=function(e){var t=e.sheet;return r.a.createElement("div",{className:"sheet-wrapper"},t.slots.map((function(e,t){return r.a.createElement(h,{key:t,row:e})})))},d=n(3),p=n.n(d),f=n(7),m=n(1),g=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"debug",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ok",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();Object(m.a)(this,e),this.type=t,this.message=n,this.timestamp=a},b=(n(22),n(8)),w=n.n(b),E=n(9),y=n.n(E);var S=function(e){var t=e.setStream,n=function(){var e=Object(f.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!1,video:{width:320,height:320}});case 2:n=e.sent,t(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"Scan-Button-Wrapper",onClick:n},r.a.createElement("img",{src:w.a,width:80,alt:"Start Scanning"}))},T=function(e){var t,n=e.pushLog,i=Object(a.useState)(!1),l=Object(o.a)(i,2),c=l[0],s=l[1],u=Object(a.useRef)(null),h=Object(a.useRef)(null),v=function(){var e=function(e){var t=e.video,n=e.canvas;if(!n)return null;if(!t)return null;if(!t.srcObject)return null;var a=n.getContext("2d");if(!a)return null;a.drawImage(t,0,0,t.width,t.height);var r=a.getImageData(0,0,t.width,t.height);return y()(r.data,t.width,t.height)}({video:u.current,canvas:h.current});if(e){s(!1),clearInterval(t),u.current.style.display="none",n(new g("detected",e.data));try{var a=JSON.parse(e.data);console.log(a)}catch(r){console.error(r)}}};return r.a.createElement("div",{className:"Scanner"},r.a.createElement("div",{className:"video-wrapper"},r.a.createElement("video",{width:320,height:320,ref:u,autoPlay:!0}),r.a.createElement("div",{className:"code-area"}),r.a.createElement("canvas",{className:"capture-canvas",ref:h,width:320,height:320}),c?null:r.a.createElement(S,{setStream:function(e){u.current.style.display="block",u.current&&(u.current.srcObject=e,t=setInterval(v,1e3),s(!0))}})))},j=n(10),N=n(12),k=n(11),O=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{x:0,y:0},l=arguments.length>5&&void 0!==arguments[5]&&arguments[5];Object(m.a)(this,e),this.value=t,this.label=n,this.description=a,this.imageURL=r,this.position=i,this.punched=l},I=function(){function e(t,n,a){Object(m.a)(this,e),this.width=t,this.height=n,this.slots=a,this.length=void 0,this.length=t*n}return Object(k.a)(e,null,[{key:"arrayShuffle",value:function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e}},{key:"getShuffledListWithLength",value:function(e,t){for(var n=[];n.length<t;)n.push.apply(n,Object(N.a)(this.arrayShuffle(e)));return n}},{key:"createSlot",value:function(e,t,n){var a=e.value,r=e.label,i=e.description,l=e.imageURL,o=[t%n,Math.floor(t/n)];return new O(a,r,i,l,{x:o[0],y:o[1]})}},{key:"create",value:function(t){var n=this,a=t.sheet,r=a.width,i=a.height,l=Array(i).fill(!0).map((function(){return[]})),o=r*i;return this.getShuffledListWithLength(t.slot.variations,o).map((function(e,t){var a=n.createSlot(e,t,r);return l[a.position.y].push(a)})),new e(t.sheet.width,t.sheet.height,l)}}]),e}(),J=function(e){var t=e.log;return r.a.createElement("li",null,JSON.stringify(t))},P=function(){var e=I.create(j.bingo),t=Object(a.useState)([]),n=Object(o.a)(t,2),i=n[0],l=n[1];return r.a.createElement("div",{className:"App"},r.a.createElement(T,{pushLog:function(e){return l(i.concat(e))}}),r.a.createElement("div",null,r.a.createElement("ul",null,i.reverse().map((function(e){return r.a.createElement(J,{key:e.timestamp,log:e})})))),r.a.createElement(v,{sheet:e}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[13,1,2]]]);
//# sourceMappingURL=main.64e9cc8e.chunk.js.map